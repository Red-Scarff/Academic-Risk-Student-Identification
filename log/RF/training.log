[2025-07-02 04:11:05] [INFO] ============================================================
[2025-07-02 04:11:05] [INFO] 学业困难学生识别 - 随机森林模型
[2025-07-02 04:11:05] [INFO] ============================================================
[2025-07-02 04:11:05] [INFO] 算法类型: 集成学习
[2025-07-02 04:11:05] [INFO] 特点: 高准确性、抗过拟合、特征重要性评估
[2025-07-02 04:11:05] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:05] [INFO] 特征预设解释:
[2025-07-02 04:11:05] [INFO] early_engagement_score: 课程前4周的平均参与度
[2025-07-02 04:11:05] [INFO] total_active_days: 总活跃天数
[2025-07-02 04:11:05] [INFO] total_clicks: 总点击次数
[2025-07-02 04:11:05] [INFO] num_of_prev_attempts: 先前尝试次数
[2025-07-02 04:11:05] [INFO] date_unregistration: 退课日期
[2025-07-02 04:11:05] [INFO] studied_credits: 学习学分
[2025-07-02 04:11:05] [INFO] imd_band: 社会经济地位指数
[2025-07-02 04:11:05] [INFO] final_result: 最终成绩
[2025-07-02 04:11:05] [INFO] days_active_resource: 资源访问活跃天数
[2025-07-02 04:11:05] [INFO] clicks_resource: 资源点击总数
[2025-07-02 04:11:05] [INFO] gender: 性别
[2025-07-02 04:11:05] [INFO] region: 地区
[2025-07-02 04:11:05] [INFO] highest_education: 最高教育水平
[2025-07-02 04:11:05] [INFO] age_band: 年龄段
[2025-07-02 04:11:05] [INFO] disability: 是否有残疾
[2025-07-02 04:11:05] [INFO] semester: 学期
[2025-07-02 04:11:05] [INFO] code_module: 课程模块
[2025-07-02 04:11:05] [INFO] presentation_year: 开课年份
[2025-07-02 04:11:05] [INFO] avg_clicks_per_day: 日均点击量
[2025-07-02 04:11:05] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:05] [INFO] 数据加载阶段
[2025-07-02 04:11:05] [INFO] ==============================
[2025-07-02 04:11:05] [INFO] 数据集形状: (31482, 62)
[2025-07-02 04:11:05] [INFO] 学业困难比例: 53.45%
[2025-07-02 04:11:05] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:05] [INFO] 数据准备阶段
[2025-07-02 04:11:05] [INFO] ==============================
[2025-07-02 04:11:05] [INFO] 划分训练集和测试集 (80:20)...
[2025-07-02 04:11:05] [INFO] 训练集: 25185样本, 测试集: 6297样本
[2025-07-02 04:11:05] [INFO] 学业困难比例 - 训练集: 53.45%, 测试集: 53.45%
[2025-07-02 04:11:05] [INFO] 标准化特征数据...
[2025-07-02 04:11:05] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:05] [INFO] 模型配置
[2025-07-02 04:11:05] [INFO] ==============================
[2025-07-02 04:11:05] [INFO] 树的数量: 150
[2025-07-02 04:11:05] [INFO] 最大深度: 10
[2025-07-02 04:11:05] [INFO] 最小分裂样本数: 5
[2025-07-02 04:11:05] [INFO] 最小叶子样本数: 2
[2025-07-02 04:11:05] [INFO] 特征选择方式: sqrt
[2025-07-02 04:11:05] [INFO] 使用自助采样: True
[2025-07-02 04:11:05] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:05] [INFO] 模型训练阶段
[2025-07-02 04:11:05] [INFO] ==============================
[2025-07-02 04:11:05] [INFO] 开始训练随机森林模型...
[2025-07-02 04:11:06] [INFO] 训练完成，耗时: 0.54秒
[2025-07-02 04:11:06] [INFO] 模型已保存至: log/RF/academic_risk_model.pkl
[2025-07-02 04:11:06] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:06] [INFO] 模型评估阶段
[2025-07-02 04:11:06] [INFO] ==============================
[2025-07-02 04:11:06] [INFO] 评估模型性能...
[2025-07-02 04:11:06] [INFO] 评估耗时: 0.12秒
[2025-07-02 04:11:06] [INFO] 
============================================================
[2025-07-02 04:11:06] [INFO] 模型性能指标:
[2025-07-02 04:11:06] [INFO] 准确率: 0.9554
[2025-07-02 04:11:06] [INFO] 精确率: 0.9898
[2025-07-02 04:11:06] [INFO] 召回率: 0.9260
[2025-07-02 04:11:06] [INFO] F1分数: 0.9569
[2025-07-02 04:11:06] [INFO] AUC分数: 0.9968
[2025-07-02 04:11:06] [INFO] 
混淆矩阵:
[2025-07-02 04:11:06] [INFO] 
[[2899   32]
 [ 249 3117]]
[2025-07-02 04:11:06] [INFO] 
分类报告:
[2025-07-02 04:11:06] [INFO] 
              precision    recall  f1-score   support

        正常学生       0.92      0.99      0.95      2931
      学业困难学生       0.99      0.93      0.96      3366

    accuracy                           0.96      6297
   macro avg       0.96      0.96      0.96      6297
weighted avg       0.96      0.96      0.96      6297

[2025-07-02 04:11:06] [INFO] 特征重要性图已保存至: log/RF/feature_importance.png
[2025-07-02 04:11:06] [INFO] ROC曲线已保存至: log/RF/roc_curve.png
[2025-07-02 04:11:06] [INFO] 
------------------------------------------------------------
[2025-07-02 04:11:06] [INFO] 模型解释性分析
[2025-07-02 04:11:06] [INFO] ==============================
[2025-07-02 04:11:06] [INFO] 执行SHAP特征分析...
[2025-07-02 04:11:14] [INFO] SHAP摘要图: log/RF/shap_analysis/shap_summary.png
[2025-07-02 04:11:14] [INFO] SHAP条形图: log/RF/shap_analysis/shap_bar.png
[2025-07-02 04:11:14] [INFO] 
特征重要性分析:
[2025-07-02 04:11:14] [INFO] 
Top 10重要特征:
[2025-07-02 04:11:14] [INFO]                feature  shap_value
          final_result    0.123174
   date_unregistration    0.052510
  days_active_homepage    0.048665
early_engagement_score    0.037516
     total_active_days    0.032506
          total_clicks    0.024847
           clicks_quiz    0.024055
       clicks_homepage    0.021406
      days_active_quiz    0.019864
  days_active_resource    0.019385
[2025-07-02 04:11:14] [INFO] 
详细解释前5个重要特征:
[2025-07-02 04:11:14] [INFO] - final_result (SHAP值: 0.1232): 最终成绩
[2025-07-02 04:11:14] [INFO] - date_unregistration (SHAP值: 0.0525): 退课日期
[2025-07-02 04:11:14] [INFO] - days_active_homepage (SHAP值: 0.0487): 重要行为特征
[2025-07-02 04:11:14] [INFO] - early_engagement_score (SHAP值: 0.0375): 课程前4周的平均参与度
[2025-07-02 04:11:14] [INFO] - total_active_days (SHAP值: 0.0325): 总活跃天数
[2025-07-02 04:11:14] [INFO] 
============================================================
[2025-07-02 04:11:14] [INFO] 模型训练总结
[2025-07-02 04:11:14] [INFO] ============================================================
[2025-07-02 04:11:14] [INFO] 学业困难识别率 (召回率): 92.60%
[2025-07-02 04:11:14] [INFO] 模型准确率: 95.54%
[2025-07-02 04:11:14] [INFO] F1分数: 0.9569
[2025-07-02 04:11:14] [INFO] AUC分数: 0.9968
[2025-07-02 04:11:14] [INFO] 
训练完成时间: 2025-07-02 04:11:14
[2025-07-02 04:11:14] [INFO] ============================================================
